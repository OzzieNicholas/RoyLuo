

# 3.2 模型构建

## 3.2.1 静态定价模型

在众包物流市场中，平台的定价不仅影响自身的利润，还会对消费者的选择和配送员的供给产生深远的影响。因此，我们建立了一个静态定价模型，分析在一定的时间框架内，平台如何通过价格策略来实现利润最大化。该模型基于 3.1.2 中提出的假设，尤其是关于需求、供给和报酬等关键因素的建模假设。
首先，我们回顾并细化该模型的构建基础。模型的主要目标是通过调整平台 $i$ 的定价策略 $p_i$，使其在竞争环境中获得最大的利润。以下是具体的模型的具体表达式：
$
\Pi_i(p_i, p_j) = p_i \cdot n^d_i(p_i, p_j) - W_i(p_i) \cdot N^s_i(p_i, p_j) \tag{3-11}
$
其中，（1）$\Pi_i(p_i, p_j)$ 表示平台 $i$ 的总利润，依赖于自身定价 $p_i$ 和竞争平台 $p_j$ 的定价策略。此表达式与表达式 3-6 一致，即在假设 4 中提出的利润最大化公式。在这个静态定价模型中，平台 $i$ 通过调节定价来影响总利润，包括需求和供给两方面。（2）$p_i$ 是平台 $i$ 的定价，代表消费者在平台 $i$ 上支付的价格。定价 $p_i$ 不仅影响平台的收入，还决定了平台支付给配送员的报酬，并间接影响配送员的供给。$p_j$ 是竞争平台 $j$ 的定价，代表消费者在其他平台上可能支付的价格。平台 $i$ 的需求函数会受到竞争平台定价 $p_j$ 的干扰，影响其总需求。（3）$n^d_i(p_i, p_j)$ 是平台 $i$ 的需求函数，依赖于自身定价 $p_i$ 和竞争平台 $p_j$ 的定价。此表达式来源于表达式 3-3，即在假设 1 中的需求函数。该函数说明，平台的需求不仅取决于自身价格，还会受到竞争对手的价格干扰，以及市场中的随机波动因素的影响。（4）$W_i(p_i)$ 是平台支付给配送员的报酬，假设与平台定价成正比，$W_i(p_i) = \gamma_i p_i$。此表达式与表达式 3-5 一致，即在假设 3 中提出的报酬与价格的线性关系。通过调整 $\gamma_i$，平台能够动态调节报酬比例，从而影响配送员的工作积极性和供给量。（5）$N^s_i(p_i, p_j)$ 是平台的供给函数，代表愿意为平台服务的配送员数量。供给函数取决于平台的定价 $p_i$ 和竞争平台 $p_j$ 的定价。此表达式来源于表达式 3-4，即在假设 2 中的供给函数。配送员的供给不仅受到报酬的影响，还与市场需求相关，且包含了随机波动因素。
该模型的基础来源于 3.1.2 中假设 1 和假设 2 对于需求和供给的描述。我们假设消费者的需求不仅受自身定价影响，还受竞争平台价格的影响。同样，配送员的供给与平台支付的报酬密切相关，且报酬与定价呈正相关。

对于需求函数的建模，消费者的需求行为决定了平台的收入。基于 3.1.1 中的描述，消费者会在多个平台之间进行选择，需求不仅取决于平台 $i$ 的定价 $p_i$，还受到竞争平台 $j$ 的定价 $p_j$ 的影响。我们假设消费者对价格的响应是非线性的，并受到价格弹性等因素的影响。由于要考虑到消费者对平台 $i$ 的定价 $p_i$ 的反应，以及竞争平台 $j$ 的定价 $p_j$ 对需求的影响，所以，我们引入表达式 3-1 中的需求函数

对于供给函数的建模，供给函数描述了平台 $i$ 的配送员供给行为。配送员的供给量 $N^s_i(p_i, p_j)$ 主要受到平台支付给他们的报酬 $W_i(p_i)$ 的影响。我们假设平台的报酬 $W_i(p_i)$ 与平台定价 $p_i$ 成正比，结合表达式 3-5 之后，我们构建以下供给函数描述供给的非线性响应：

$$
N^s_i(p_i, p_j) = \epsilon \frac{W_i(p_i)}{1 + \lambda W_i(p_i)} + \beta \frac{n^d_i(p_i, p_j)}{1 + \mu n^d_i(p_i, p_j)} \tag{3-12}
$$

其中，（1）$\epsilon$ 表示配送员对报酬的敏感度，值越大，配送员对报酬的变化反应越敏感。（2）$\lambda$ 表示报酬的非线性弹性系数，控制供给随报酬增长逐渐减缓的趋势。随着报酬的增加，供给增长会放缓，捕捉边际递减效应。（3）$\beta$ 表示需求对供给的影响权重，表示需求的增长如何驱动供给的增加。（4）$\mu$ 表示需求的非线性弹性系数，控制需求对供给的影响，随着需求的增长，供给的增长也逐渐趋缓。

该模型的推导源自 3.1.2 假设 2，即配送员的供给不仅依赖于平台的报酬，还依赖于平台的需求量。具体而言，通过第一项表示报酬与供给的非线性关系，报酬的增加呈现出递减的边际效应。当报酬较低时，增加报酬会明显提升供给量，但报酬达到一定水平后，供给的提升将逐渐减缓。通过第二项描述了需求对供给的推动作用。平台需求越大，更多配送员愿意提供服务，但供给增长的边际效应同样递减，受参数 $\mu$ 控制。

将需求函数和供给函数代入平台的利润函数，得到：

$$
\Pi_i(p_i, p_j) = p_i \left[ a e^{-a t} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) + k \cdot \frac{p_j}{1 + \alpha p_j} \right] - W_i(p_i) \cdot N^s_i(p_i, p_j)
$$

进一步代入 $W_i(p_i) = \gamma_i p_i$ 和 $N^s_i(p_i, p_j)$：

$$
\Pi_i(p_i, p_j) = p_i \left[ a e^{-a t} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) + k \cdot \frac{p_j}{1 + \alpha p_j} \right] - \gamma_i p_i \left( \epsilon \cdot \frac{\gamma_i p_i}{1 + \lambda \gamma_i p_i} + \beta \cdot \frac{n^d_i(p_i, p_j)}{1 + \mu n^d_i(p_i, p_j)} \right) \tag{3-13}
$$

这个利润函数的推导反映了两大关键因素：（1）利润函数中的收入项 $p_i \cdot n^d_i(p_i, p_j)$ 表示平台通过定价从消费者处获得的收入。需求函数 $n^d_i(p_i, p_j)$ 依赖于平台的定价 $p_i$ 和竞争平台 $p_j$ 的定价。该项反映了随着平台定价变化，平台收入的动态变化。（2）成本项 $W_i(p_i) \cdot N^s_i(p_i, p_j)$ 表示平台支付给配送员的成本。通过将报酬函数 $W_i(p_i) = \gamma_i p_i$ 代入，成本与平台定价直接相关。供给函数 $N^s_i(p_i, p_j)$ 反映了配送员对报酬和需求的敏感性，捕捉了报酬与供给之间的非线性关系。

接下来我们进行模型的求解

为了使平台 $ i $ 的利润 $\Pi_i(p_i, p_j)$ 最大化，我们的目标是找到最优的定价策略 $ p_i^* $，即能够使利润最大化的定价。这要求我们对利润函数 $\Pi_i(p_i, p_j)$ 进行求导，并找到使得一阶导数为零的点 $ p_i^* $。

为了找到最优定价策略 $ p_i^* $，我们首先对利润函数 $\Pi_i(p_i, p_j)$ 对 $ p_i $ 进行一阶导数求解：

$$
\frac{\partial \Pi_i(p_i, p_j)}{\partial p_i} = \frac{\partial}{\partial p_i} \left[ p_i \cdot n^d_i(p_i, p_j) - W_i(p_i) \cdot N^s_i(p_i, p_j) \right]
$$

接下来，我们分别对利润函数的收入项和成本项进行求导。

收入项为：

$$
p_i \cdot n^d_i(p_i, p_j) = p_i \cdot \left[ a e^{-a t} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) + k \cdot \frac{p_j}{1 + \alpha p_j} \right]
$$

我们使用乘积法则对该项进行求导：

$$
\frac{\partial}{\partial p_i} \left[ p_i \cdot n^d_i(p_i, p_j) \right]
$$

即分别对 $ p_i $ 乘以 $ n^d_i(p_i, p_j) $ 的每一部分进行求导：

对 $ p_i \cdot a e^{-a t} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) $ 求导：
$$
\frac{\partial}{\partial p_i} \left[ p_i \cdot a e^{-a t} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) \right] = a e^{-a t} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) + p_i \cdot a e^{-a t} \cdot \frac{\partial}{\partial p_i} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right)
$$

其中，使用链式法则：

$$
\frac{\partial}{\partial p_i} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) = \frac{b (1 + \alpha p_i) - b p_i \alpha}{(1 + \alpha p_i)^2}
$$

因此，收入项的求导结果为：

$$
a e^{-a t} \left[ \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) + p_i \cdot \frac{b (1 + \alpha p_i) - b p_i \alpha}{(1 + \alpha p_i)^2} \right]
$$

对 $ p_i \cdot k \cdot \frac{p_j}{1 + \alpha p_j} $ 求导：

由于这一项中没有 $ p_i $ 的变量，因此其对 $ p_i $ 求导为 0：

$$
\frac{\partial}{\partial p_i} \left( p_i \cdot k \cdot \frac{p_j}{1 + \alpha p_j} \right) = k \cdot \frac{p_j}{1 + \alpha p_j}
$$

因此，总的收入项求导结果为：

$$
\frac{\partial}{\partial p_i} \left( p_i \cdot n^d_i(p_i, p_j) \right) = a e^{-a t} \left[ \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) + p_i \cdot \frac{b (1 + \alpha p_i) - b p_i \alpha}{(1 + \alpha p_i)^2} \right] + k \cdot \frac{p_j}{1 + \alpha p_j}
$$

成本项为：

$$
W_i(p_i) \cdot N^s_i(p_i, p_j) = \gamma_i p_i \cdot \left( \epsilon \cdot \frac{\gamma_i p_i}{1 + \lambda \gamma_i p_i} + \beta \cdot \frac{n^d_i(p_i, p_j)}{1 + \mu n^d_i(p_i, p_j)} \right)
$$

我们使用商法则对成本项求导，同样可以分为两部分处理：

对 $\gamma_i p_i \cdot \epsilon \cdot \frac{\gamma_i p_i}{1 + \lambda \gamma_i p_i}$ 求导：
$$
\frac{\partial}{\partial p_i} \left[ \gamma_i p_i \cdot \epsilon \cdot \frac{\gamma_i p_i}{1 + \lambda \gamma_i p_i} \right] = \epsilon \gamma_i^2 \cdot \frac{(1 + 2 \lambda \gamma_i p_i)}{(1 + \lambda \gamma_i p_i)^2}
$$

对 $\gamma_i p_i \cdot \beta \cdot \frac{n^d_i(p_i, p_j)}{1 + \mu n^d_i(p_i, p_j)}$ 求导：

首先，我们需要对 $n^d_i(p_i, p_j)$ 求导：

$$
\frac{\partial n^d_i(p_i, p_j)}{\partial p_i} = a e^{-a t} \cdot \frac{b (1 + \alpha p_i) - b p_i \alpha}{(1 + \alpha p_i)^2}
$$

然后，将此结果代入链式法则中：

$$
\frac{\partial}{\partial p_i} \left[ \gamma_i p_i \cdot \beta \cdot \frac{n^d_i(p_i, p_j)}{1 + \mu n^d_i(p_i, p_j)} \right] = \beta \cdot \frac{n^d_i(p_i, p_j) + \mu \cdot n^d_i(p_i, p_j) \cdot \frac{\partial n^d_i(p_i, p_j)}{\partial p_i}}{(1 + \mu n^d_i(p_i, p_j))^2}
$$

将收入项和成本项的求导结果相加，得到一阶导数的完整表达式：

$$
\frac{\partial \Pi_i(p_i, p_j)}{\partial p_i} = a e^{-a t} \left[ \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) + p_i \cdot \frac{b (1 + \alpha p_i) - b p_i \alpha}{(1 + \alpha p_i)^2} \right] + k \cdot \frac{p_j}{1 + \alpha p_j}
$$

$$
- \gamma_i^2 \epsilon \cdot \frac{(1 + 2 \lambda \gamma_i p_i)}{(1 + \lambda \gamma_i p_i)^2} - \beta \cdot \frac{n^d_i(p_i, p_j) + \mu \cdot n^d_i(p_i, p_j) \cdot \frac{\partial n^d_i(p_i, p_j)}{\partial p_i}}{(1 + \mu n^d_i(p_i, p_j))^2} \tag{3-14}
$$

将一阶导数设为零，即可解出最优定价 $ p_i^* $

由于我们推导出的一阶导数方程中包含复杂的非线性项，难以通过解析方法直接求解。因此，为了找到最优定价 $ p_i^* $，我们采用牛顿迭代法作为数值求解的方法。牛顿迭代法通过初始猜测值逐步逼近解，直到达到收敛条件。

牛顿迭代法的基本公式为：

$$
p_i^{(n+1)} = p_i^{(n)} - \frac{f(p_i^{(n)})}{f'(p_i^{(n)})}
$$

其中，（1）$ p_i^{(n)} $ 是第 $n$ 次迭代时的定价值。（2）$ f(p_i) $ 是我们推导出的利润函数的 一阶导数。（3）$ f'(p_i) $ 是一阶导数对定价 $ p_i $ 的导数，即 二阶导数。

接下来我们将详细介绍数值求解过程中的各个步骤，包括初始值选择、导数计算以及迭代过程。

为了开始牛顿迭代法，我们需要选取一个合理的初始值 $ p_i^{(0)} $。该初始值在实际应用中可以根据以下方式选取：（1）使用平台当前的定价作为初始值。（2）使用历史数据或者经验数据中常见的定价水平。

牛顿迭代法的核心在于每次迭代时利用当前定价值 $ p_i^{(n)} $，计算出一阶导数 $ f(p_i) $ 及其导数 $ f'(p_i) $，并通过这两个值更新定价。接下来我们具体说明这些导数的计算过程。

根据前面的推导，在 3-14 中，我们已经求出了利润函数的一阶导数表达式，将这一导数代入 $ f(p_i) $ 中，我们可以得到一阶导数的完整表达式。为了使用牛顿迭代法，我们还需要计算 二阶导数 $ f'(p_i) $，即利润函数的二阶导数。接下来对一阶导数 $ f(p_i) $ 进行求导，计算其对定价 $ p_i $ 的导数。

首先对第一项 $ a e^{-a t} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) $ 求导：

$$
\frac{\partial}{\partial p_i} \left( a e^{-a t} \left( 1 - \frac{b p_i}{1 + \alpha p_i} \right) \right) = a e^{-a t} \cdot \frac{b \alpha (1 + \alpha p_i) + b p_i \alpha^2}{(1 + \alpha p_i)^3}
$$

对于第二项 $ \gamma_i^2 \epsilon \cdot \frac{(1 + 2 \lambda \gamma_i p_i)}{(1 + \lambda \gamma_i p_i)^2} $ 求导：

$$
\frac{\partial}{\partial p_i} \left( \gamma_i^2 \epsilon \cdot \frac{(1 + 2 \lambda \gamma_i p_i)}{(1 + \lambda \gamma_i p_i)^2} \right) = \gamma_i^3 \epsilon \cdot \frac{2 \lambda (1 + 3 \lambda \gamma_i p_i)}{(1 + \lambda \gamma_i p_i)^3}
$$

对于需求导数项 $ \beta \cdot \frac{\partial}{\partial p_i} \left( \frac{n^d_i(p_i, p_j)}{1 + \mu n^d_i(p_i, p_j)} \right) $：

$$
\frac{\partial}{\partial p_i} \left( \frac{n^d_i(p_i, p_j)}{1 + \mu n^d_i(p_i, p_j)} \right) = \frac{\frac{\partial n^d_i(p_i, p_j)}{\partial p_i} (1 + \mu n^d_i(p_i, p_j)) - \mu (n^d_i(p_i, p_j))^2 \frac{\partial n^d_i(p_i, p_j)}{\partial p_i}}{(1 + \mu n^d_i(p_i, p_j))^3}
$$

将所有部分代入，得到二阶导数 $ f'(p_i) $ 的完整表达式。

牛顿迭代法的核心是通过迭代逐步逼近最优定价。为了判断迭代是否收敛，我们引入收敛标准：

$$
|p_i^{(n+1)} - p_i^{(n)}| < \epsilon
$$

我们可以选择一个非常小的阈值 $ \epsilon $，例如 $ \epsilon = 10^{-6} $，以保证最终结果的准确性。当连续两次迭代之间的定价变化小于预设的阈值 $ \epsilon $ 时，认为迭代过程已经收敛，在求解时，如果未收敛，则会一直重复迭代，直到达到收敛标准。通过这种数值方法，我们能够逼近平台的最优定价 $ p_i^* $，从而使平台的利润达到最大化。

## 3.2.2 动态定价模型

为了优化平台的定价策略，我们引入了动态定价模型。平台的定价不仅需要考虑到当前的需求和供给情况，还必须根据市场环境中的不确定性、竞争对手的行为和未来的市场波动进行动态调整。在现实市场中，需求和供给是高度动态的，它们不仅受到平台自身价格的影响，还会因为竞争对手的价格变化、市场环境中的不确定性因素等发生波动。为了在这种复杂的市场环境中实现利润最大化，平台需要通过定价策略的动态优化来平衡需求、供给、运营成本以及与竞争对手的博弈。
同时，平台的供需平衡、调度成本、延迟成本等多个因素也需要在定价过程中动态平衡。因此，平台面临的是一个动态优化问题，需要根据当前市场状况和未来的不确定性调整价格，以最大化长期利润。在这种背景下，我们提出了动态定价模型，通过该模型平台可以优化其价格，平衡供需并实现利润最大化。
最终的动态定价模型目标是：
$\max_{p_i(t)} \mathbb{E} \left[ \int_0^T \left( p_i(t) n^d_i(p_i(t), p_j(t), t) - \gamma_i p_i(t) N^s_i(p_i(t), p_j(t), t) - C_i(n^d_i, N^s_i) - \rho_i Y_i^2(t) \right) dt \right] \tag{}$

根据之前各种假设，说明上述动态模型的推导过程

考虑需求与供给的互动关系，价格不仅影响消费者的需求，还会影响供给方（如配送员）的行为响应。因此，动态定价模型的核心是建立需求和供给之间的相互依赖关系，确保平台可以通过调节价格来平衡供需。我们首先考虑平台的需求函数 $n^d_i(p_i(t), p_j(t), t)$（使用 3-3）。需求受到多个因素的影响，包括自身的价格 $p_i(t)$、竞争对手的价格 $p_j(t)$ 和市场的随机波动。通过这种依赖关系，平台可以在不同市场环境下感知需求的变化，并且随时调节定价来优化需求响应。另一方面，配送员的供给函数 $N^s_i(p_i(t), p_j(t), t)$（使用 3-4）表明供给的响应同样依赖于价格。配送员的供给量不仅仅依赖于平台支付的报酬 $W_i(p_i(t))$（使用 3-5），还会因为市场需求的变化而动态调整。这种机制说明，供给不仅仅是被动的，而是根据市场需求的动态响应进行变化。供需之间的相互依赖关系意味着，价格的调整会同时影响需求和供给：价格升高可能会抑制需求，但会激励更多配送员进入市场，反之亦然。这种互动关系使得定价策略不能孤立地考虑需求或供给，而是必须同时考虑两者之间的相互作用。

考虑需求、供给和利润的动态平衡。我们的目标是通过动态定价策略来最大化平台的利润。平台的利润函数是价格与需求的乘积减去报酬成本和运营成本（使用 3-6）。该函数描述了平台在给定的价格下如何通过满足需求和调节供给来获得利润，同时也揭示了平台在不同时间节点的利润变化。利润函数的两个关键因素是需求和供给。通过需求函数和供给函数的相互作用，我们能够看到定价的关键作用：价格直接影响需求，进而影响供给；而供给又会反过来影响平台的服务能力。如果供给不足，平台将面临延迟成本，影响客户体验；而供给过多则会导致调度成本的上升。因此，平台必须平衡这两种成本。

考虑延迟成本与调度成本的控制。在我们的模型中，运营成本 $C_i(n^d_i, N^s_i)$ 包含了延迟成本和调度成本（使用 3-7）。这两种成本的动态变化是定价决策中的重要因素。延迟成本 $ \theta \cdot \max(n^d_i - N^s_i, 0) $ 描述了在需求超过供给时，服务的延迟所产生的额外成本。如果供给不足，延迟成本会显著上升，因此平台必须确保供给与需求匹配。另一方面，调度成本 $ \eta \cdot (N^s_i)^2 $ 体现了供给过多时，资源调度和管理所带来的额外开销。这种调度成本随着供给量的增加呈现非线性增长，意味着平台在提供过多配送员时，将面临过高的调度和管理负担。为了控制这些成本，平台必须通过调节定价策略，在供给与需求之间找到一个平衡点，以最小化运营成本。
因此，延迟成本和调度成本的引入，使得平台必须在制定定价策略时，不仅考虑价格如何影响需求，还必须同时关注如何有效管理供给，以避免运营成本的失控。

考虑动态博弈与竞争中的定价策略。当考虑到市场上的竞争行为时，平台不仅需要考虑自身的定价策略，还必须关注竞争对手的行为。在纳什均衡的背景下（使用 3-8 和 3-10），两个平台的定价策略会相互影响，每个平台都无法通过单方面调整价格来进一步提升利润。这意味着平台 $i$ 的价格决策 $p_i(t)$ 不仅取决于自身的需求和供给状况，还受到竞争对手平台 $j$ 的价格 $p_j(t)$ 的影响。通过博弈论的分析，我们可以得出在均衡状态下，平台 $i$ 和平台 $j$ 的定价策略会相互制约，最终实现一个双方都无法通过单方面调整而提高利润的稳定点。这个动态博弈模型为定价策略的设计增加了现实性。平台在真实的竞争环境中，不能孤立地做出定价决策，而必须考虑市场中其他竞争者的反应。这种博弈框架下的定价策略，使得我们的动态定价模型能够更好地适应市场竞争环境。

考虑价值函数与HJB方程的最优控制。为了进一步细化定价模型，我们引入了HJB方程（使用 3-8），这是一个动态规划方程，能够为平台提供最优定价策略。HJB方程通过描述平台在时间上的价值演化，确保平台可以在未来不确定的市场波动中找到最优的定价路径。该方程中的价值函数 $V_i(n^d_i, N^s_i, t)$ 描述了平台在未来各个时间点的预期价值。这种预期考虑了未来市场的波动、竞争对手的反应、需求和供给的不确定性等多个因素。通过求解HJB方程，平台能够动态调整定价策略，以在长期中实现利润最大化。HJB方程的引入使得定价问题从简单的静态优化，转变为一个具有时间维度的动态最优控制问题。平台可以根据未来预期不断调整定价策略，确保其在市场环境变化时始终保持利润最大化的最优路径。





